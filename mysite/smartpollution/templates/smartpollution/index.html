<html>
<title>Devices</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
{% load static %}
<link rel="stylesheet" href="{% static 'smartpollution/w3.css' %}">
<link rel="stylesheet" href="{% static 'smartpollution/forms.css' %}">
<body>

<div class="w3-top">
    <div class="w3-bar w3-red w3-card-2 w3-left-align w3-large">
        <a href="{% url 'smartpollution:index' %}"
           class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Devices</a>
        <a href="{% url 'smartpollution:index_templates' %}"
           class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Templates</a>
        <a href="{% url 'smartpollution:about' %}"
           class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">About</a>
    </div>
</div>
<!-- Header -->
<header class="w3-container w3-red w3-center" style="padding:128px 16px">
    <h1 class="w3-margin w3-jumbo">Pollution Monitoring</h1>
    <a href="{% url 'smartpollution:register_device' %}" button
       class="w3-button w3-black w3-padding-large w3-large w3-margin-top">Register a new device</a>
</header>

<div class="w3-row-padding w3-padding-64 w3-container">
    <div class="w3-content">
        <br class="w3-twothird">
        <h1>Or choose and existing device</h1>
        <form action="{% url 'smartpollution:device_search' %}" method="post">
            {% csrf_token %}
            <label for="deviceSearch">Search for a device:</label>
            <input type="search" name="deviceSearch" value="A device you want to find">
            <input type="submit" button
       class="w3-button w3-black w3-padding-large w3-large w3-margin-top">
        </form>
        {% if device_found %}
            <ul class="w3-ul">
                {% for device in device_found %}
                    <li>
                        <a href="{% url 'smartpollution:detail' device.id %}">{{ device.device_name }} made
                            by {{ device.manufacturing_company }}</a>
                        <ul class="w3-ul">
                            {% for met in device.metrics.all %}
                                <li><a>Captures: {{ met.physical_property }} in {{ met.unit_of_measurement }} </a></li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Showing all devices:</p>
            {% if device_list %}
                <ul class="w3-ul">
                    {% for device in device_list %}
                        <li>
                            <a href="{% url 'smartpollution:detail' device.id %}">{{ device.device_name }} made
                                by {{ device.manufacturing_company }}</a>
                            <ul class="w3-ul">
                                {% for met in device.metrics.all %}
                                    <li><a>Captures: {{ met.physical_property }} in {{ met.unit_of_measurement }} </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                    {% endfor %}
                </ul>

            {% else %}
                <p>No devices are available.</p>
            {% endif %}
        {% endif %}


    </div>
    <div class="w3-third w3-center">
    </div>
</div>
</div>
</body>